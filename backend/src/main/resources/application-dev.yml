# ========================================
# Spring Boot Configuration - Development Profile
# ========================================
spring:
  application:
    name: antipanel-backend

  # ========================================
  # Database Configuration
  # ========================================
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://postgres:5432/antipanel}
    username: ${SPRING_DATASOURCE_USERNAME:antipanel_user}
    password: ${SPRING_DATASOURCE_PASSWORD:antipanel_password}
    driver-class-name: org.postgresql.Driver

  # ========================================
  # Flyway Database Migrations
  # ========================================
  flyway:
    enabled: true
    baseline-on-migrate: true
    baseline-version: 1
    locations: classpath:db/migration
    validate-on-migrate: true

  # ========================================
  # JPA / Hibernate Configuration
  # ========================================
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      # Use 'validate' - Flyway handles migrations
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true
        highlight_sql: true

  # ========================================
  # Development Tools
  # ========================================
  devtools:
    restart:
      enabled: ${SPRING_DEVTOOLS_RESTART_ENABLED:true}
    livereload:
      enabled: true

# ========================================
# CORS Configuration (for frontend development)
# ========================================
app:
  cors:
    allowed-origins: ${APP_CORS_ALLOWED_ORIGINS:http://localhost:4200,http://localhost:3000}

# ========================================
# Logging Configuration (Verbose for Development)
# ========================================
logging:
  level:
    root: INFO
    com.antipanel: DEBUG
    org.springframework.web: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

# ========================================
# Actuator Configuration (All endpoints exposed)
# ========================================
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always

// ==========================================================================
// SCSS MIXINS
// ==========================================================================
// Reusable patterns and utilities as SCSS mixins.
// Import variables for calculations.
// ==========================================================================

@use 'sass:list';
@use '../00-settings/variables' as *;

// ---------------------------------------------------------------------------
// RESPONSIVE BREAKPOINTS
// ---------------------------------------------------------------------------
// Mobile-first approach using min-width queries.
//
// Usage:
//   @include respond-to('md') { ... }
//   @include respond-to('lg') { ... }

@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media screen and (min-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Breakpoint '#{$breakpoint}' not found in $breakpoints map.";
  }
}

// Max-width queries (desktop-first, use sparingly)
@mixin respond-below($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media screen and (max-width: (map-get($breakpoints, $breakpoint) - 1px)) {
      @content;
    }
  } @else {
    @warn "Breakpoint '#{$breakpoint}' not found in $breakpoints map.";
  }
}

// ---------------------------------------------------------------------------
// FLEXBOX UTILITIES
// ---------------------------------------------------------------------------

@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin flex-column {
  display: flex;
  flex-direction: column;
}

@mixin flex-column-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

// ---------------------------------------------------------------------------
// TYPOGRAPHY
// ---------------------------------------------------------------------------
// Generate consistent typography styles.
//
// Usage:
//   @include typography('h1', 'bold');
//   @include typography('body', 'regular', 'secondary');

@mixin typography($size, $weight: 'regular', $family: 'primary') {
  // Font family
  @if $family == 'primary' {
    font-family: var(--font-primary);
  } @else if $family == 'secondary' {
    font-family: var(--font-secondary);
  }

  // Font size
  @if list.index($font-size-names, $size) {
    font-size: var(--font-size-#{$size});
  }

  // Font weight
  @if $weight == 'light' {
    font-weight: var(--font-weight-light);
  } @else if $weight == 'regular' {
    font-weight: var(--font-weight-regular);
  } @else if $weight == 'medium' {
    font-weight: var(--font-weight-medium);
  } @else if $weight == 'semibold' {
    font-weight: var(--font-weight-semibold);
  } @else if $weight == 'bold' {
    font-weight: var(--font-weight-bold);
  } @else if $weight == 'extrabold' {
    font-weight: var(--font-weight-extrabold);
  }

  // Line height based on size category
  @if $size == 'title' or $size == 'h1' or $size == 'h2' or $size == 'h3' or $size == 'h4' or $size == 'h5' or $size == 'h6' {
    line-height: var(--line-height-tight);
  } @else {
    line-height: var(--line-height-normal);
  }
}

// ---------------------------------------------------------------------------
// FOCUS VISIBLE (Accessibility)
// ---------------------------------------------------------------------------
// Consistent focus ring for keyboard navigation.
//
// Usage:
//   @include focus-visible;
//   @include focus-visible($color-success);

@mixin focus-visible($color: var(--focus-ring-color)) {
  &:focus {
    outline: none;
  }

  &:focus-visible {
    outline: var(--focus-ring-width) solid $color;
    outline-offset: var(--focus-ring-offset);
  }
}

// ---------------------------------------------------------------------------
// BUTTON BASE
// ---------------------------------------------------------------------------
// Common button styles for consistent buttons.

@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);
  padding: var(--spacing-3) var(--spacing-6);
  font-family: var(--font-primary);
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-h5);
  line-height: var(--line-height-tight);
  text-align: center;
  text-decoration: none;
  text-transform: uppercase;
  white-space: nowrap;
  cursor: pointer;
  border: none;
  border-radius: var(--radius-lg);
  transition: var(--transition-colors), var(--transition-transform), var(--transition-shadow);

  &:disabled,
  &[disabled] {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  @include focus-visible;
}

// ---------------------------------------------------------------------------
// TRUNCATE TEXT
// ---------------------------------------------------------------------------
// Single line text truncation with ellipsis.

@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Multi-line truncation (modern browsers)
@mixin truncate-lines($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ---------------------------------------------------------------------------
// VISUALLY HIDDEN (Accessibility)
// ---------------------------------------------------------------------------
// Hide visually but keep accessible to screen readers.

@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// ---------------------------------------------------------------------------
// RESET BUTTON
// ---------------------------------------------------------------------------
// Remove default button styles.

@mixin reset-button {
  appearance: none;
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;
  cursor: pointer;
}

// ---------------------------------------------------------------------------
// RESET LIST
// ---------------------------------------------------------------------------
// Remove default list styles.

@mixin reset-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

// ---------------------------------------------------------------------------
// RESET INPUT
// ---------------------------------------------------------------------------
// Remove default input styles.

@mixin reset-input {
  appearance: none;
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;

  &:focus {
    outline: none;
  }
}

// ---------------------------------------------------------------------------
// CARD STYLES
// ---------------------------------------------------------------------------
// Base card pattern for consistent cards.

@mixin card-base {
  background-color: var(--color-background);
  border: var(--border-width-heavy) solid var(--color-information);
  border-radius: var(--radius-xl);
  padding: var(--spacing-8);
  transition: var(--transition-colors), var(--transition-shadow);
}

@mixin card-hover {
  &:hover {
    border-color: var(--color-secondary);
  }
}

// ---------------------------------------------------------------------------
// INTERACTIVE SCALE
// ---------------------------------------------------------------------------
// Subtle scale effect for interactive elements.

@mixin interactive-scale($scale: 0.98) {
  transition: var(--transition-transform);

  &:active {
    transform: scale($scale);
  }
}

// ---------------------------------------------------------------------------
// SCROLLBAR STYLING
// ---------------------------------------------------------------------------
// Custom scrollbar for webkit browsers.

@mixin custom-scrollbar($width: 8px, $track: var(--color-tiny-info), $thumb: var(--color-secondary)) {
  &::-webkit-scrollbar {
    width: $width;
    height: $width;
  }

  &::-webkit-scrollbar-track {
    background: $track;
    border-radius: var(--radius-full);
  }

  &::-webkit-scrollbar-thumb {
    background: $thumb;
    border-radius: var(--radius-full);

    &:hover {
      background: var(--color-foreground);
    }
  }

  // Firefox
  scrollbar-width: thin;
  scrollbar-color: $thumb $track;
}

// ---------------------------------------------------------------------------
// ABSOLUTE FILL
// ---------------------------------------------------------------------------
// Position element to fill parent.

@mixin absolute-fill {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

// ---------------------------------------------------------------------------
// ASPECT RATIO (Fallback)
// ---------------------------------------------------------------------------
// For browsers without aspect-ratio support.

@mixin aspect-ratio($width, $height) {
  aspect-ratio: #{$width} / #{$height};

  // Fallback for older browsers
  @supports not (aspect-ratio: 1 / 1) {
    &::before {
      content: '';
      display: block;
      padding-top: calc(#{$height} / #{$width} * 100%);
    }
  }
}
